# Vite Configuration (@mono/vite-config)

üåç **–ó–º—ñ–Ω–∏—Ç–∏ –º–æ–≤—É –Ω–∞:** [English (EN)](./README.md)

–¶–µ–π –ø–∞–∫–µ—Ç –Ω–∞–¥–∞—î —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω—É —Ç–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–æ–≤–∞–Ω—É –±–∞–∑–æ–≤—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é Vite, –ø—Ä–∏–∑–Ω–∞—á–µ–Ω—É –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —É –ø—Ä–æ–µ–∫—Ç–∞—Ö –≤ –º–µ–∂–∞—Ö –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é.

## –ú–µ—Ç–∞ –ø–∞–∫–µ—Ç—É

–û—Å–Ω–æ–≤–Ω–∞ –º–µ—Ç–∞ —Ü—å–æ–≥–æ –ø–∞–∫–µ—Ç—É - —Å–ø—Ä–æ—Å—Ç–∏—Ç–∏ —Ä–æ–∑—Ä–æ–±–∫—É —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫—É –ø—Ä–æ–µ–∫—Ç—ñ–≤, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å Vite, —à–ª—è—Ö–æ–º:

- **–¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–∞—Ü—ñ—ó –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å**: –ë–∞–∑–æ–≤–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Vite –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ –æ–¥–Ω–æ–º—É –º—ñ—Å—Ü—ñ.
- **–£–Ω—ñ—Ñ—ñ–∫–∞—Ü—ñ—ó**: –ó–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è —î–¥–∏–Ω–æ–≥–æ –ø—ñ–¥—Ö–æ–¥—É –¥–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –∑–±—ñ—Ä–∫–∏ —Ç–∞ —Ä–æ–∑—Ä–æ–±–∫–∏ –¥–ª—è –≤—Å—ñ—Ö –ø—Ä–æ–µ–∫—Ç—ñ–≤, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å —Ü—é –±–∞–∑—É.
- **–ó–º–µ–Ω—à–µ–Ω–Ω—è Boilerplate**: –°–∫–æ—Ä–æ—á–µ–Ω–Ω—è –æ–±—Å—è–≥—É –ø–æ–≤—Ç–æ—Ä—é–≤–∞–Ω–∏—Ö –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å —É –∫–æ–∂–Ω–æ–º—É `vite.config.ts` –æ–∫—Ä–µ–º–æ–≥–æ –ø—Ä–æ–µ–∫—Ç—É.
- **–°–ø—Ä–æ—â–µ–Ω–Ω—è –æ–Ω–æ–≤–ª–µ–Ω—å**: –õ–µ–≥–∫–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≤–µ—Ä—Å—ñ–π Vite, –ø–ª–∞–≥—ñ–Ω—ñ–≤ —Ç–∞ –ø–æ–≤'—è–∑–∞–Ω–∏—Ö –ø—Ä–∞–≤–∏–ª –¥–ª—è –≤—Å—å–æ–≥–æ –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é —á–µ—Ä–µ–∑ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ü—ñ—î—ó –±–∞–∑–æ–≤–æ—ó –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó.
- **–ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –Ω–∞–π–∫—Ä–∞—â–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫**: –í–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—è –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–∏—Ö —á–∞—Å–æ–º –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å, —è–∫—ñ —Å–ª—É–≥—É—é—Ç—å –æ—Å–Ω–æ–≤–æ—é –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Ç–∏–ø—ñ–≤ –¥–æ–¥–∞—Ç–∫—ñ–≤.

## –î–æ—Å—Ç—É–ø–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

–ü–∞–∫–µ—Ç –µ–∫—Å–ø–æ—Ä—Ç—É—î —î–¥–∏–Ω—É –±–∞–∑–æ–≤—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é (—à–ª—è—Ö –¥–ª—è —ñ–º–ø–æ—Ä—Ç—É –±–∞–∑—É—î—Ç—å—Å—è –Ω–∞ –ø–æ–ª—ñ `exports` —É `package.json` —Ü—å–æ–≥–æ –ø–∞–∫–µ—Ç—É, –∑–∞–∑–≤–∏—á–∞–π `@mono/vite-config`):

- **`vite.config.base.ts` (–µ–∫—Å–ø–æ—Ä—Ç—É—î—Ç—å—Å—è —è–∫ `@mono/vite-config`)**:
  –ë–∞–∑–æ–≤–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Vite. –í–∫–ª—é—á–∞—î –∑–∞–≥–∞–ª—å–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è, —Ç–∞–∫—ñ —è–∫ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏ —Ç–∞ –∑–±—ñ—Ä–∫–∏, –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä–∞, –æ–±—Ä–æ–±–∫—É CSS, –ø—ñ–¥—Ç—Ä–∏–º–∫—É TypeScript, –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è `manualChunks` –¥–ª—è –∫—Ä–∞—â–æ–≥–æ –∫–µ—à—É–≤–∞–Ω–Ω—è –≤–µ–Ω–¥–æ—Ä—ñ–≤, —Ç–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—é –∑ `lightningcss`. –¶—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Å–ª—É–≥—É—î —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–æ—é –æ—Å–Ω–æ–≤–æ—é –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Ç–∏–ø—ñ–≤ –ø—Ä–æ–µ–∫—Ç—ñ–≤ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, React, Vue, Svelte), —è–∫—ñ –º–æ–∂—É—Ç—å –¥–æ–ø–æ–≤–Ω—é–≤–∞—Ç–∏ —ó—ó —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω–∏–º–∏ –¥–ª—è —Å–µ–±–µ –ø–ª–∞–≥—ñ–Ω–∞–º–∏ —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º–∏.

## –ö–ª—é—á–æ–≤—ñ –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

- **–û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–π –ø—Ä–æ—Ü–µ—Å —Ä–æ–∑—Ä–æ–±–∫–∏**: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ Hot Module Replacement (HMR) —Ç–∞ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞ —Ä–æ–∑—Ä–æ–±–∫–∏.
- **–ï—Ñ–µ–∫—Ç–∏–≤–Ω–∞ –∑–±—ñ—Ä–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É**: –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –∫–æ–¥—É, —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è –Ω–∞ —á–∞–Ω–∫–∏ (`react-vendor`, `vendor`), –º—ñ–Ω—ñ—Ñ—ñ–∫–∞—Ü—ñ—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `esbuild` –∞–±–æ `lightningcss` –¥–ª—è CSS.
- **–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —Å—É—á–∞—Å–Ω–∏—Ö —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ñ–≤**: –ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∞ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ TypeScript —Ç–∞ ESNext.
- **–†–æ–∑—à–∏—Ä—é–≤–∞–Ω—ñ—Å—Ç—å**: –õ–µ–≥–∫–æ —Ä–æ–∑—à–∏—Ä—é—î—Ç—å—Å—è —Ç–∞ –∫–∞—Å—Ç–æ–º—ñ–∑—É—î—Ç—å—Å—è. –ü—Ä–æ–µ–∫—Ç–∏ –º–æ–∂—É—Ç—å —ñ–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ —Ü—é –±–∞–∑–æ–≤—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é —Ç–∞ –æ–±'—î–¥–Ω—É–≤–∞—Ç–∏ —ó—ó –∑—ñ —Å–≤–æ—ó–º–∏ —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω–∏–º–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `mergeConfig` –≤—ñ–¥ Vite.
- **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—î–º**: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è `fs.allow` –¥–ª—è –∫–æ—Ä–µ–∫—Ç–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ –≤ —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é.
- **–£–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω—ñ—Å—Ç—å**: –ó–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è —î–¥–∏–Ω–æ–≥–æ –ø—ñ–¥—Ö–æ–¥—É –¥–æ –±–∞–∑–æ–≤–æ—ó –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó Vite —É –≤—Å—ñ—Ö —á–∞—Å—Ç–∏–Ω–∞—Ö –≤–∞—à–æ–≥–æ –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é.
- **–ë–µ–∑–ø–µ–∫–∞**: –í–∫–ª—é—á–µ–Ω–æ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é CSP Nonce –¥–ª—è HTML.

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

–©–æ–± –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –±–∞–∑–æ–≤—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é —É –≤–∞—à–æ–º—É –ø—Ä–æ–µ–∫—Ç—ñ, –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å —Ü–µ–π –ø–∞–∫–µ—Ç (`@mono/vite-config`) —è–∫ –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å —Ä–æ–∑—Ä–æ–±–∫–∏. –ü–æ—Ç—ñ–º —É —Ñ–∞–π–ª—ñ `vite.config.ts` –≤–∞—à–æ–≥–æ –ø—Ä–æ–µ–∫—Ç—É —ñ–º–ø–æ—Ä—Ç—É–π—Ç–µ —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ü—é –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é, –∑–∞ –ø–æ—Ç—Ä–µ–±–∏ –æ–±'—î–¥–Ω—É—é—á–∏ —ó—ó –∑ –≤–ª–∞—Å–Ω–∏–º–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º–∏:

```typescript
import { defineConfig, mergeConfig } from 'vite';
import baseConfig from '@mono/vite-config'; // –Ü–º–ø–æ—Ä—Ç –±–∞–∑–æ–≤–æ—ó –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó

export default defineConfig((configEnv) => {
  // –ë–∞–∑–æ–≤–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –º–æ–∂–µ –±—É—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—î—é –∞–±–æ –æ–±'—î–∫—Ç–æ–º.
  // –Ø–∫—â–æ —Ü–µ —Ñ—É–Ω–∫—Ü—ñ—è (—è–∫ —É –Ω–∞–¥–∞–Ω–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ vite.config.base.ts), –≤–∏–∫–ª–∏–∫–∞—î–º–æ —ó—ó:
  const resolvedBaseConfig = typeof baseConfig === 'function' ? baseConfig(configEnv) : baseConfig;

  return mergeConfig(
    resolvedBaseConfig, // –ë–∞–∑–æ–≤–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –∑ –≤–∞—à–æ–≥–æ –ø–∞–∫–µ—Ç—É
    {
      // –°–ø–µ—Ü–∏—Ñ—ñ—á–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è –≤–∞—à–æ–≥–æ –ø—Ä–æ–µ–∫—Ç—É
      // –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–ª—è React-–¥–æ–¥–∞—Ç–∫—É:
      // plugins: [react()], // –ù–µ –∑–∞–±—É–¥—å—Ç–µ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ @vitejs/plugin-react
      server: {
        port: 3001, // –í–∞—à –ø–æ—Ä—Ç
      },
      resolve: {
        alias: {
          '@': '/src', // –ü—Ä–∏–∫–ª–∞–¥ –∞–ª—ñ–∞—Å—É –¥–ª—è –≤–∞—à–æ–≥–æ –ø—Ä–æ–µ–∫—Ç—É
        },
      },
      // –Ü–Ω—à—ñ —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω—ñ –¥–ª—è –ø—Ä–æ–µ–∫—Ç—É –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è...
    }
  );
});
