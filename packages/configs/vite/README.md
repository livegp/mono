# Vite Configuration (@mono/vite-config)

Цей пакет надає централізовану та стандартизовану базову конфігурацію Vite, призначену для використання у проектах в межах монорепозиторію.

## Мета пакету

Основна мета цього пакету - спростити розробку та підтримку проектів, що використовують Vite, шляхом:

- **Централізації налаштувань**: Базова конфігурація Vite зберігається в одному місці.
- **Уніфікації**: Забезпечення єдиного підходу до налаштувань збірки та розробки для всіх проектів, що використовують цю базу.
- **Зменшення Boilerplate**: Скорочення обсягу повторюваних налаштувань у кожному `vite.config.ts` окремого проекту.
- **Спрощення оновлень**: Легке оновлення версій Vite, плагінів та пов'язаних правил для всього монорепозиторію через оновлення цієї базової конфігурації.
- **Застосування найкращих практик**: Впровадження перевірених часом налаштувань, які слугують основою для різних типів додатків.

## Доступна конфігурація

Пакет експортує єдину базову конфігурацію (шлях для імпорту базується на полі `exports` у `package.json` цього пакету, зазвичай `@mono/vite-config`):

- **`vite.config.base.ts` (експортується як `@mono/vite-config`)**:
  Базова конфігурація Vite. Включає загальні налаштування, такі як оптимізації для розробки та збірки, налаштування сервера, обробку CSS, підтримку TypeScript, налаштування для `manualChunks` для кращого кешування вендорів, та інтеграцію з `lightningcss`. Ця конфігурація слугує універсальною основою для різних типів проектів (наприклад, React, Vue, Svelte), які можуть доповнювати її специфічними для себе плагінами та налаштуваннями.

## Ключові особливості

- **Оптимізований процес розробки**: Налаштування для швидкого Hot Module Replacement (HMR) та ефективної роботи сервера розробки.
- **Ефективна збірка для продакшену**: Оптимізація коду, розділення на чанки (`react-vendor`, `vendor`), мініфікація за допомогою `esbuild` або `lightningcss` для CSS.
- **Підтримка сучасних стандартів**: Налаштована для роботи з TypeScript та ESNext.
- **Розширюваність**: Легко розширюється та кастомізується. Проекти можуть імпортувати цю базову конфігурацію та об'єднувати її зі своїми специфічними налаштуваннями за допомогою `mergeConfig` від Vite.
- **Інтеграція з монорепозиторієм**: Налаштування `fs.allow` для коректної роботи в середовищі монорепозиторію.
- **Уніфікованість**: Забезпечення єдиного підходу до базової конфігурації Vite у всіх частинах вашого монорепозиторію.
- **Безпека**: Включено генерацію CSP Nonce для HTML.

## Використання

Щоб використати базову конфігурацію у вашому проекті, встановіть цей пакет (`@mono/vite-config`) як залежність розробки. Потім у файлі `vite.config.ts` вашого проекту імпортуйте та використовуйте цю конфігурацію, за потреби об'єднуючи її з власними налаштуваннями:

```typescript
import { defineConfig, mergeConfig } from 'vite';
import baseConfig from '@mono/vite-config'; // Імпорт базової конфігурації

export default defineConfig((configEnv) => {
  // Базова конфігурація може бути функцією або об'єктом.
  // Якщо це функція (як у наданому прикладі vite.config.base.ts), викликаємо її:
  const resolvedBaseConfig = typeof baseConfig === 'function' ? baseConfig(configEnv) : baseConfig;

  return mergeConfig(
    resolvedBaseConfig, // Базова конфігурація з вашого пакету
    {
      // Специфічні налаштування для вашого проекту
      // Наприклад, для React-додатку:
      // plugins: [react()], // Не забудьте встановити @vitejs/plugin-react
      server: {
        port: 3001, // Ваш порт
      },
      resolve: {
        alias: {
          '@': '/src', // Приклад аліасу для вашого проекту
        },
      },
      // Інші специфічні для проекту налаштування...
    }
  );
});
